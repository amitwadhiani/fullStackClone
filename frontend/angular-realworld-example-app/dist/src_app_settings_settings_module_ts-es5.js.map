{"version":3,"sources":["webpack:///src/app/settings/settings-routing.module.ts","webpack:///src/app/settings/settings.component.ts","webpack:///src/app/settings/settings.component.html","webpack:///src/app/settings/settings.module.ts"],"names":["routes","path","component","SettingsComponent","canActivate","AuthGuard","SettingsRoutingModule","RouterModule","router","userService","fb","cd","user","errors","isSubmitting","settingsForm","group","image","username","bio","email","password","Object","assign","getCurrentUser","patchValue","purgeAuth","navigateByUrl","updateUser","value","update","subscribe","updatedUser","err","markForCheck","values","submitForm","logout","SettingsModule","SharedModule"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,UAAMA,MAAM,GAAW,CACrB;AACEC,YAAI,EAAE,EADR;AAEEC,iBAAS,EAAE,iDAAAC,iBAFb;AAGEC,mBAAW,EAAE,CAAC,mCAAAC,SAAD;AAHf,OADqB,CAAvB;;UAYaC,sB;;;;;yBAAAA,sB;AAAqB,O;;;cAArBA;;;kBAHF,CAAC,6CAAAC,YAAA,UAAsBP,MAAtB,CAAD,C,EACC,6CAAAO,Y;;;;4HAECD,sB,EAAqB;AAAA;AAAA,oBAFtB,6CAAAC,YAEsB;AAAA,S;AAFV,O;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCJXJ,kB;AAMX,oCACUK,MADV,EAEUC,WAFV,EAGUC,EAHV,EAIUC,EAJV,EAI+B;AAAA;;AAHrB,eAAAH,MAAA,GAAAA,MAAA;AACA,eAAAC,WAAA,GAAAA,WAAA;AACA,eAAAC,EAAA,GAAAA,EAAA;AACA,eAAAC,EAAA,GAAAA,EAAA;AATV,eAAAC,IAAA,GAAa,EAAb;AAEA,eAAAC,MAAA,GAAiB,EAAjB;AACA,eAAAC,YAAA,GAAe,KAAf,CAM+B,CAE7B;;AACA,eAAKC,YAAL,GAAoB,KAAKL,EAAL,CAAQM,KAAR,CAAc;AAChCC,iBAAK,EAAE,EADyB;AAEhCC,oBAAQ,EAAE,EAFsB;AAGhCC,eAAG,EAAE,EAH2B;AAIhCC,iBAAK,EAAE,EAJyB;AAKhCC,oBAAQ,EAAE;AALsB,WAAd,CAApB,CAH6B,CAU7B;AACA;AACD;;;;iBAED,oBAAW;AACT;AACAC,kBAAM,CAACC,MAAP,CAAc,KAAKX,IAAnB,EAAyB,KAAKH,WAAL,CAAiBe,cAAjB,EAAzB,EAFS,CAGT;;AACA,iBAAKT,YAAL,CAAkBU,UAAlB,CAA6B,KAAKb,IAAlC;AACD;;;iBAED,kBAAS;AACP,iBAAKH,WAAL,CAAiBiB,SAAjB;AACA,iBAAKlB,MAAL,CAAYmB,aAAZ,CAA0B,GAA1B;AACD;;;iBAED,sBAAa;AAAA;;AACX,iBAAKb,YAAL,GAAoB,IAApB,CADW,CAGX;;AACA,iBAAKc,UAAL,CAAgB,KAAKb,YAAL,CAAkBc,KAAlC;AAEA,iBAAKpB,WAAL,CACCqB,MADD,CACQ,KAAKlB,IADb,EAECmB,SAFD,CAGE,UAAAC,WAAW;AAAA,qBAAI,KAAI,CAACxB,MAAL,CAAYmB,aAAZ,CAA0B,cAAcK,WAAW,CAACd,QAApD,CAAJ;AAAA,aAHb,EAIE,UAAAe,GAAG,EAAI;AACL,mBAAI,CAACpB,MAAL,GAAcoB,GAAd;AACA,mBAAI,CAACnB,YAAL,GAAoB,KAApB;;AACA,mBAAI,CAACH,EAAL,CAAQuB,YAAR;AACD,aARH;AAUD;;;iBAED,oBAAWC,MAAX,EAA2B;AACzBb,kBAAM,CAACC,MAAP,CAAc,KAAKX,IAAnB,EAAyBuB,MAAzB;AACD;;;;;;;yBAxDUhC,kB,EAAiB,oH,EAAA,+G,EAAA,wH,EAAA,6H;AAAA,O;;;cAAjBA,kB;AAAiB,0C;AAAA,iB;AAAA,e;AAAA,+4B;AAAA;AAAA;ACX9B;;AACE;;AACE;;AACE;;AAEE;;AAA2B;;AAAa;;AAExC;;AAEA;;AAAiC;AAAA,qBAAY,IAAAiC,UAAA,EAAZ;AAAwB,aAAxB;;AAC/B;;AAEE;;AACE;;AAIF;;AAEA;;AACE;;AAIF;;AAEA;;AACE;;AAIA;;AAAA;;AACF;;AAEA;;AACE;;AAIF;;AAEA;;AACE;;AAIF;;AAEA;;AAEE;;AACF;;AAEF;;AACF;;AAGA;;AAEA;;AACE;AAAA,qBAAS,IAAAC,MAAA,EAAT;AAAiB,aAAjB;;AACA;;AACF;;AAEF;;AACF;;AACF;;AACF;;;;AA5DyB;;AAAA;;AAEX;;AAAA;;AACM;;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UCKPC,e;;;;;yBAAAA,e;AAAc,O;;;cAAdA;;;kBARF,CACP,qCAAAC,YADO,EAEP,sDAAAjC,qBAFO,C;;;;4HAQEgC,e,EAAc;AAAA,yBAHvB,iDAAAnC,iBAGuB;AAHN,oBAJjB,qCAAAoC,YAIiB,EAHjB,sDAAAjC,qBAGiB;AAGM,S;AANF,O","file":"src_app_settings_settings_module_ts-es5.js","sourcesContent":["import { NgModule } from '@angular/core';\r\nimport { RouterModule, Routes } from '@angular/router';\r\nimport { AuthGuard } from '../core';\r\nimport { SettingsComponent } from './settings.component';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: SettingsComponent,\r\n    canActivate: [AuthGuard]\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule]\r\n})\r\nexport class SettingsRoutingModule {}\r\n","import { Component, OnInit, ChangeDetectionStrategy, ChangeDetectorRef } from '@angular/core';\r\nimport { FormBuilder, FormGroup } from '@angular/forms';\r\nimport { Router } from '@angular/router';\r\n\r\nimport { User, UserService } from '../core';\r\n\r\n@Component({\r\n  selector: 'app-settings-page',\r\n  templateUrl: './settings.component.html',\r\n  changeDetection: ChangeDetectionStrategy.OnPush\r\n})\r\nexport class SettingsComponent implements OnInit {\r\n  user: User = {} as User;\r\n  settingsForm: FormGroup;\r\n  errors: Object = {};\r\n  isSubmitting = false;\r\n\r\n  constructor(\r\n    private router: Router,\r\n    private userService: UserService,\r\n    private fb: FormBuilder,\r\n    private cd: ChangeDetectorRef\r\n  ) {\r\n    // create form group using the form builder\r\n    this.settingsForm = this.fb.group({\r\n      image: '',\r\n      username: '',\r\n      bio: '',\r\n      email: '',\r\n      password: ''\r\n    });\r\n    // Optional: subscribe to changes on the form\r\n    // this.settingsForm.valueChanges.subscribe(values => this.updateUser(values));\r\n  }\r\n\r\n  ngOnInit() {\r\n    // Make a fresh copy of the current user's object to place in editable form fields\r\n    Object.assign(this.user, this.userService.getCurrentUser());\r\n    // Fill the form\r\n    this.settingsForm.patchValue(this.user);\r\n  }\r\n\r\n  logout() {\r\n    this.userService.purgeAuth();\r\n    this.router.navigateByUrl('/');\r\n  }\r\n\r\n  submitForm() {\r\n    this.isSubmitting = true;\r\n\r\n    // update the model\r\n    this.updateUser(this.settingsForm.value);\r\n\r\n    this.userService\r\n    .update(this.user)\r\n    .subscribe(\r\n      updatedUser => this.router.navigateByUrl('/profile/' + updatedUser.username),\r\n      err => {\r\n        this.errors = err;\r\n        this.isSubmitting = false;\r\n        this.cd.markForCheck();\r\n      }\r\n    );\r\n  }\r\n\r\n  updateUser(values: Object) {\r\n    Object.assign(this.user, values);\r\n  }\r\n\r\n}\r\n","<div class=\"settings-page\">\r\n  <div class=\"container page\">\r\n    <div class=\"row\">\r\n      <div class=\"col-md-6 offset-md-3 col-xs-12\">\r\n\r\n        <h1 class=\"text-xs-center\">Your Settings</h1>\r\n\r\n        <app-list-errors [errors]=\"errors\"></app-list-errors>\r\n\r\n        <form [formGroup]=\"settingsForm\" (ngSubmit)=\"submitForm()\">\r\n          <fieldset [disabled]=\"isSubmitting\">\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control\"\r\n                type=\"text\"\r\n                placeholder=\"URL of profile picture\"\r\n                formControlName=\"image\" />\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control form-control-lg\"\r\n                type=\"text\"\r\n                placeholder=\"Username\"\r\n                formControlName=\"username\" />\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <textarea class=\"form-control form-control-lg\"\r\n                rows=\"8\"\r\n                placeholder=\"Short bio about you\"\r\n                formControlName=\"bio\">\r\n              </textarea>\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control form-control-lg\"\r\n                type=\"email\"\r\n                placeholder=\"Email\"\r\n                formControlName=\"email\" />\r\n            </fieldset>\r\n\r\n            <fieldset class=\"form-group\">\r\n              <input class=\"form-control form-control-lg\"\r\n                type=\"password\"\r\n                placeholder=\"New Password\"\r\n                formControlName=\"password\" />\r\n            </fieldset>\r\n\r\n            <button class=\"btn btn-lg btn-primary pull-xs-right\"\r\n              type=\"submit\">\r\n              Update Settings\r\n            </button>\r\n\r\n          </fieldset>\r\n        </form>\r\n\r\n        <!-- Line break for logout button -->\r\n        <hr />\r\n\r\n        <button class=\"btn btn-outline-danger\"\r\n          (click)=\"logout()\">\r\n          Or click here to logout.\r\n        </button>\r\n\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n","import { NgModule } from '@angular/core';\r\n\r\nimport { SettingsComponent } from './settings.component';\r\nimport { SharedModule } from '../shared';\r\nimport { SettingsRoutingModule } from './settings-routing.module';\r\n\r\n@NgModule({\r\n  imports: [\r\n    SharedModule,\r\n    SettingsRoutingModule\r\n  ],\r\n  declarations: [\r\n    SettingsComponent\r\n  ]\r\n})\r\nexport class SettingsModule {}\r\n"]}